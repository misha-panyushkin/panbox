/* panbox - v0.0.1 - 2015-02-23
 * Homepage: http://panbox.io/
 * Author: Misha Panyushkin <panyushkin@playform.com>
 * Copyright.*/

!function(a){function b(){var a,b,c,d;return a=document.createElement("div"),a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a),b=a.offsetWidth,a.style.overflow="scroll",c=document.createElement("div"),c.style.width="100%",a.appendChild(c),d=c.offsetWidth,a.parentNode.removeChild(a),b-d}function c(){var a,b,c,d=$("[data-panbox-css]");d.length||(a="/* panbox core css */\n[data-panbox-contentbox]{width: 100%; height: 100%; overflow-y: scroll;}\n[data-panbox-coverbox]{overflow: hidden; display: inline-block; position: relative;}\n[data-panbox-scrollbar-track]{position: absolute; top: 0; right: 0; bottom: 0;}\n[data-panbox-scrollbar-thumb]{position: absolute; top: 0; right: 1px; width: 7px;}",c="/* panbox core css */\n[data-panbox-scrollbar-thumb]{background-color:#8A8A8A; border-radius:150px;}",b="/* panbox no width scrollbar css */\n[data-panbox-contentbox-nowidthscrollbar]::-webkit-scrollbar {-webkit-appearance: none;}\n[data-panbox-contentbox-nowidthscrollbar]::-webkit-scrollbar:vertical {display: none;}\n[data-panbox-contentbox-nowidthscrollbar]::-webkit-scrollbar-thumb {display: none;}\n[data-panbox-contentbox-nowidthscrollbar]::-webkit-scrollbar-track {display: none;}",$("<style>").attr("data-panbox-css",1).html(a+"\n\n"+c+"\n\n"+b).prependTo("head"))}function d(a,b){c(),this.$contentbox=$(a),this.wrap(b),this.$contentbox.get(0).panbox=this}Function.prototype.bind=Function.prototype.bind||function(a){var b=Array.prototype.slice.call(arguments,1),c=this;return function(){var d=Array.prototype.slice.call(arguments);return c.apply(a,b.concat(d))}},d.prototype.defaults={thumb_height:20,update:function(){var a=this.$contentbox.get(0);this.scroll_top=a.scrollTop,this.scroll_height=a.scrollHeight,this.client_height=a.clientHeight,this.scroll_height!=this.client_height?(this.thumb_height=Math.pow(this.client_height,2)/this.scroll_height,this.thumb_height<this.defaults.thumb_height&&(this.thumb_height=this.defaults.thumb_height)):this.thumb_height=0,this.thumb_offset=this.client_height*this.scroll_top/this.scroll_height,this.$scrollthumb.css({height:this.thumb_height,top:this.thumb_offset}),!this.locked}},d.prototype.wrap=function(a){var c;return this.params=a||{},this.params.scrollthumb=this.params.scrollthumb||{},this.$contentbox.attr("data-panbox-contentbox",1),(c=0===b())?this.$contentbox.attr("data-panbox-contentbox-nowidthscrollbar",1):this.$contentbox.css("margin-right",-c),this.$coverbox=this.$coverbox||this.$contentbox.wrap("<div/>").parent().attr("data-panbox-coverbox",1),this.$coverbox.css({width:this.params.width||"100%",height:this.params.height||"100%"}),this.$scrollbar=this.$scrollbar||$("<div/>").attr("data-panbox-scrollbar-track",1).appendTo(this.$coverbox),this.$scrollthumb=this.$scrollthumb||$("<div/>").attr("data-panbox-scrollbar-thumb",1).appendTo(this.$scrollbar),this.params.scrollthumb.class_name&&this.$scrollthumb.addClass(this.params.scrollthumb.class_name),this.update=this.defaults.update.bind(this),this.update(),this},d.prototype.unwrap=function(){return this.$box.replaceWith(this.$contentbox),this.$coverbox=null,this.$scrollbar=null,this.$scrollthumb=null,this},d.prototype.on=function(){return this.$contentbox.off("scroll.panbox",this.update).on("scroll.panbox",this.update),this},d.prototype.off=function(){return this.$contentbox.off("scroll.panbox",this.update),this},d.prototype.lock=function(){return this.locked=1,this},d.prototype.unlock=function(){return delete this.locked,this},d.prototype.scroll=function(a){var b=this.$contentbox.get(0);switch(a){case"top":b.scrollTop=0;break;case"bottom":b.scrollTop=b.scrollHeight;break;default:b.scrollTop=parseInt(a)||b.scrollTop}return this},a.panbox=function(a,b){var c=$(a).get(0);return c&&c.panbox?c.panbox:new d(a,b)}}(this,this);